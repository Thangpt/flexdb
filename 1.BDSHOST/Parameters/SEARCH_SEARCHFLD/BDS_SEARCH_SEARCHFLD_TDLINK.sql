--
--
/
DELETE SEARCH WHERE SEARCHCODE = 'TDLINK';
INSERT INTO SEARCH (SEARCHCODE,SEARCHTITLE,EN_SEARCHTITLE,SEARCHCMDSQL,OBJNAME,FRMNAME,ORDERBYCMDSQL,TLTXCD,CNTRECORD,ROWPERPAGE,AUTOSEARCH,INTERVAL,AUTHCODE,ROWLIMIT,CMDTYPE)
VALUES ('TDLINK','Bảo lãnh sức mua','Gurrantee','SELECT LNK.ACCTNO, LNK.AFACCTNO, SUM(CASE WHEN LNK.DORC=''C'' THEN AMT ELSE -AMT END) GRAMT, MAX(CF.FULLNAME) CFNAME
FROM TDLINK LNK, AFMAST AF, CFMAST CF WHERE LNK.DELTD<>''Y'' AND LNK.ACCTNO=''<$KEYVAL>'' AND LNK.AFACCTNO=AF.ACCTNO AND AF.CUSTID=CF.CUSTID GROUP BY LNK.ACCTNO, LNK.AFACCTNO','TD.TDLINK','frmTDLINK',null,null,0,50,'N',30,null,'Y','T');
COMMIT;
/
--
--
/
DELETE SEARCHFLD WHERE SEARCHCODE = 'TDLINK';
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (3,'GRAMT','Giá trị','N','TDLINK',100,null,'<,<=,=,>=,>,<>','#,##0.###','Y','Y','N',150,null,'Amount','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (2,'AFACCTNO','Tiểu khoản','C','TDLINK',100,null,'<,<=,=,>=,>,<>','#,##0.#0','Y','Y','N',150,null,'Sub account','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (1,'CFNAME','Khách hàng','C','TDLINK',100,null,'<,<=,=,>=,>,<>','#,##0.#0','Y','Y','N',200,null,'Customer','N',null,null,'N',null,null,null,'N');
COMMIT;
/
