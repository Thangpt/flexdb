--
--
/
DELETE SEARCH WHERE SEARCHCODE = 'SEARCH_2240';
INSERT INTO SEARCH (SEARCHCODE,SEARCHTITLE,EN_SEARCHTITLE,SEARCHCMDSQL,OBJNAME,FRMNAME,ORDERBYCMDSQL,TLTXCD,CNTRECORD,ROWPERPAGE,AUTOSEARCH,INTERVAL,AUTHCODE,ROWLIMIT,CMDTYPE)
VALUES ('SEARCH_2240','Các giao dịch 2240 chua thực hiện 2246','Cac giao dich 2240 chưa thực hiện 2246','Select   sed.txnum , sed.txdate
,se.custodycd,Se.afacctno,cf.fullname,se.txdesc,
se.symbol,sed.depotrade,sed.depoblock , tl.tlname
 from cfmast cf ,afmast af,
 (Select
custodycd,afacctno,txdesc,symbol,acctno,txdate,txnum,tlid
,custid from setran_gen where tltxcd=''2240''
  Union
  Select custodycd,Substr(msgacct,0,10)
afacctno,txdesc,symbol,msgacct
acctno,txdate,txnum,tl.tlid,cf.custid
  from tllog tl,afmast af , cfmast cf , sbsecurities sb
  where tltxcd=''2240'' and af.custid = cf.custid and
Substr(msgacct,0,10) = af.acctno and sb.codeid=Substr
(msgacct,11,6)
 ) se,tlprofiles tl,
 (SELECT *  FROM SEDEPOSIT  WHERE STATUS = ''D'' AND DELTD
<> ''Y'')SED
            WHERE se.acctno=sed.acctno
            and se.txdate= sed.txdate
             and se.txnum= sed.txnum
             and cf.custid = se.custid
             and se.tlid = tl.tlid
             and se.afacctno = af.acctno
             AND (SUBSTR(CF.CUSTID,1,4) = DECODE(''<
$BRID>'', ''<$HO_BRID>'', SUBSTR(CF.CUSTID,1,4), ''<$BRID>'')
             OR AF.CAREBY IN (SELECT TLGRP.GRPID FROM
TLGRPUSERS TLGRP WHERE TLID = ''<$TELLERID>''))','SEARCH_2240',null,null,null,null,50,'N',30,null,'Y','T');
COMMIT;
/
--
--
/
DELETE SEARCHFLD WHERE SEARCHCODE = 'SEARCH_2240';
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (9,'TLNAME','Người thực hiện','C','SEARCH_2240',100,'CCCC','LIKE,=','_','Y','Y','N',100,null,'MAKER','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (8,'DEPOBLOCK','Số CK HCCN','N','SEARCH_2240',100,null,'<,<=,=,>=,>,<>','#,##0','Y','Y','N',100,null,'Blocked Quantity','N','04',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (7,'DEPOTRADE','Số CK TDCN','N','SEARCH_2240',100,null,'<,<=,=,>=,>,<>','#,##0','Y','Y','N',100,null,'Trade Quantity','N','06',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (6,'SYMBOL','Chứng khoán','C','SEARCH_2240',100,'ccccccccccccccc','LIKE,=','_','Y','Y','N',100,null,'Symbol','N','04',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (5,'TXDESC','Diễn giải','C','SEARCH_2240',100,'CCCC','LIKE,=','_','Y','Y','N',200,null,'DESCRIPTION','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (4,'FULLNAME','Tên khách hàng','C','SEARCH_2240',100,null,'LIKE,=',null,'Y','Y','N',150,null,'Customer name','N','31',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (3,'AFACCTNO','Số tiểu khoản','C','SEARCH_2240',100,null,'LIKE,=','_','Y','Y','N',100,null,'Contract number','N','02',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (2,'CUSTODYCD','Số TK lưu ký','C','SEARCH_2240',100,null,'LIKE,=','_','Y','Y','N',100,null,'Custody CD','N','04',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (1,'TXDATE','Ngày thực hiện','D','SEARCH_2240',100,'__/__/____','<,<=,=,>=,>,<>','##/##/####','Y','Y','N',100,null,'Withdraw date','N','05',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (0,'TXNUM','Số chứng từ','C','SEARCH_2240',100,null,'LIKE,=',null,'Y','Y','Y',100,null,'TXNUM','N',null,null,'N',null,null,null,'N');
COMMIT;
/
