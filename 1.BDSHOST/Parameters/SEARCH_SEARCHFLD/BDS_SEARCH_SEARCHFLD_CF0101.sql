--
--
/
DELETE SEARCH WHERE SEARCHCODE = 'CF0101';
INSERT INTO SEARCH (SEARCHCODE,SEARCHTITLE,EN_SEARCHTITLE,SEARCHCMDSQL,OBJNAME,FRMNAME,ORDERBYCMDSQL,TLTXCD,CNTRECORD,ROWPERPAGE,AUTOSEARCH,INTERVAL,AUTHCODE,ROWLIMIT,CMDTYPE)
VALUES ('CF0101','Màn hình Thu hồi hạn mức  BL của MG','CF0101','
SELECT tlid, username, t0limit, a1.cdcontent blockstatus, valdate, expdate
FROM
(
    SELECT DISTINCT tl.tliduser tlid, tlp.tlname username, tl.t0 t0limit, case when tl.status = ''B'' then ''Y'' else ''N'' end blockstatus, tl.valdate, tl.expdate
    FROM userlimit tl, tlprofiles tlp, olndetail ol WHERE tl.tliduser = tlp.tlid AND tl.tliduser = ol.userid AND ol.status = ''E'' and tl.t0 > 0
) tl, allcode a1
WHERE blockstatus = a1.cdval AND CDTYPE = ''SY'' AND CDNAME = ''YESNO''
','CF0101','frmCF0101',null,'0038',null,50,'N',30,'NYNNYYYNNN','Y','T');
COMMIT;
/
--
--
/
DELETE SEARCHFLD WHERE SEARCHCODE = 'CF0101';
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (103,'EXPDATE','Ngày kết thúc phong tỏa','D','CF0101',100,null,'<,<=,=,>=,>,<>','DD/MM/YYYY','Y','Y','N',100,null,'Exp date','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (102,'VALDATE','Ngày bắt đầu phong tỏa','D','CF0101',100,null,'<,<=,=,>=,>,<>','DD/MM/YYYY','Y','Y','N',100,null,'Val date','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (101,'BLOCKSTATUS','Trạng thái phong tỏa HM','C','CF0101',100,null,'LIKE,=',null,'Y','Y','N',150,'SELECT CDVAL VALUE, CDVAL DISPLAY FROM ALLCODE WHERE CDTYPE = ''SY'' AND CDNAME = ''YESNO'' ORDER BY LSTODR','Status blocked','Y','06',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (2,'T0LIMIT','Hạn mức BL của MG','N','CF0101',100,null,'>=,<=,=','#,##0','Y','Y','N',200,null,'T0LIMIT','N','10',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (1,'USERNAME','Tên user','C','CF0101',100,null,'LIKE,=',null,'Y','Y','N',100,null,'USERNAME','Y','02',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (0,'TLID','Mã USER','C','CF0101',100,null,'LIKE,=',null,'Y','Y','N',80,null,'TLID','N','03',null,'N',null,null,null,'N');
COMMIT;
/
