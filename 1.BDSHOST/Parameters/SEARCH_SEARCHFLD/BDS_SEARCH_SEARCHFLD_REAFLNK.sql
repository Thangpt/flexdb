--
--
/
DELETE SEARCH WHERE SEARCHCODE = 'REAFLNK';
INSERT INTO SEARCH (SEARCHCODE,SEARCHTITLE,EN_SEARCHTITLE,SEARCHCMDSQL,OBJNAME,FRMNAME,ORDERBYCMDSQL,TLTXCD,CNTRECORD,ROWPERPAGE,AUTOSEARCH,INTERVAL,AUTHCODE,ROWLIMIT,CMDTYPE)
VALUES ('REAFLNK','Tiểu khoản khách hàng thuộc môi giới/đại lý','Sub-account of broker/remiser','SELECT LNK.AUTOID,
LNK.REACCTNO, LNK.AFACCTNO, LNK.FRDATE, LNK.TODATE, A0.CDCONTENT STATUS, A1.CDCONTENT REROLE,
CF.FULLNAME REFULLNAME, CFCUST.FULLNAME CUSTNAME, TYP.TYPENAME
FROM REAFLNK LNK, RETYPE TYP, REMAST MST, CFMAST CF, AFMAST AF, CFMAST CFCUST, ALLCODE A0, ALLCODE A1
WHERE CF.CUSTID=MST.CUSTID AND CFCUST.CUSTID=AF.CUSTID AND AF.ACCTNO=LNK.AFACCTNO
AND A0.CDTYPE=''RE'' AND A0.CDNAME=''STATUS'' AND A0.CDVAL=LNK.STATUS
AND A1.CDTYPE=''RE'' AND A1.CDNAME=''REROLE'' AND A1.CDVAL=TYP.REROLE
AND LNK.REACCTNO=MST.ACCTNO AND MST.ACTYPE=TYP.ACTYPE AND LNK.REACCTNO=''<$KEYVAL>''','RE.REAFLNK','REAFLNK',null,null,0,50,'N',30,null,'Y','T');
COMMIT;
/
--
--
/
DELETE SEARCHFLD WHERE SEARCHCODE = 'REAFLNK';
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (6,'STATUS','Trạng thái','C','REAFLNK',500,null,'=',null,'Y','Y','N',100,'SELECT CDVAL VALUE, CDCONTENT DISPLAY FROM ALLCODE WHERE CDTYPE = ''RE'' AND CDNAME = ''STATUS'' ORDER BY LSTODR','Status','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (5,'TODATE','Ngày hết hạn','C','REAFLNK',200,null,'=,LIKE',null,'Y','Y','N',100,null,'Expired date','Y',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (4,'FRDATE','Ngày hiệu lực','C','REAFLNK',200,null,'=,LIKE',null,'Y','Y','N',100,null,'Effective date','Y',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (3,'REROLE','Vai trò','C','REAFLNK',200,null,'=,LIKE',null,'Y','Y','N',100,null,'Role','Y',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (2,'CUSTNAME','Khách hàng','C','REAFLNK',200,null,'=,LIKE',null,'Y','Y','N',100,null,'Customer name','Y',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (1,'AFACCTNO','Tiểu khoản KH','C','REAFLNK',200,null,'=,LIKE',null,'Y','Y','N',120,null,'Customer sub-account','Y',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (0,'AUTOID','Mã quản lý','C','REAFLNK',100,'9999','=,LIKE','_','N','N','Y',50,null,'Product type','N',null,null,'N',null,null,null,'N');
COMMIT;
/
