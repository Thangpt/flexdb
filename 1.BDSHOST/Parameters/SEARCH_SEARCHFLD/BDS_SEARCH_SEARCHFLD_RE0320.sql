--
--
/
DELETE SEARCH WHERE SEARCHCODE = 'RE0320';
INSERT INTO SEARCH (SEARCHCODE,SEARCHTITLE,EN_SEARCHTITLE,SEARCHCMDSQL,OBJNAME,FRMNAME,ORDERBYCMDSQL,TLTXCD,CNTRECORD,ROWPERPAGE,AUTOSEARCH,INTERVAL,AUTHCODE,ROWLIMIT,CMDTYPE)
VALUES ('RE0320','Tra cứu tính hoa hồng (Giao dịch 0320 để chốt hoa hồng)','View calculating commission for remiser (wait for 0320)','SELECT MST.ACCTNO, MST.CUSTID RECUSTID, TYP.TYPENAME, CF.FULLNAME, TYP.RATEFEE, TYP.RATECOMM,
CF.FULLNAME || '' ['' || A0.CDCONTENT || ''] '' REFVALUE, MST.DIRECTACR, MST.INDIRECTACR,
MST.DIRECTACR+MST.INDIRECTACR REVENUE, TYP.RATEFEE/100*(MST.DIRECTACR+MST.INDIRECTACR) FEEAMT,
FN_RE_GETCOMMISION(MST.ACCTNO)-TYP.RATEFEE/100*(MST.DIRECTACR+MST.INDIRECTACR) NMLAMT,
MST.BALANCE, A0.CDCONTENT DESC_RETYPE, A2.CDCONTENT DESC_REROLE, A1.CDCONTENT DESC_STATUS
FROM RECFLNK RF, REMAST MST, CFMAST CF, RETYPE TYP, ALLCODE A0, ALLCODE A1, ALLCODE A2
WHERE MST.ACTYPE=TYP.ACTYPE AND MST.CUSTID=CF.CUSTID
AND A0.CDTYPE=''RE'' AND A0.CDNAME=''RETYPE'' AND TYP.RETYPE=A0.CDVAL
AND A2.CDTYPE=''RE'' AND A2.CDNAME=''REROLE'' AND TYP.REROLE=A2.CDVAL
AND A1.CDTYPE=''RE'' AND A1.CDNAME=''STATUS'' AND MST.STATUS=A1.CDVAL
AND RF.CUSTID=MST.CUSTID AND FN_RE_GETCOMMISION(MST.ACCTNO)>0','RE.REMAST','frmREMAST',null,'0320',0,50,'N',30,'NYNNYYYNNN','Y','T');
COMMIT;
/
--
--
/
DELETE SEARCHFLD WHERE SEARCHCODE = 'RE0320';
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (11,'BALANCE','Số dư hoa hồng','N','RE0320',80,null,'<,<=,=,>=,>,<>','#,##0.###','Y','Y','N',100,null,'InDirect amount','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (10,'INDIRECTACR','DS gián tiếp','N','RE0320',80,null,'<,<=,=,>=,>,<>','#,##0.###','N','N','N',100,null,'InDirect amount','N','12',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (9,'DIRECTACR','DS trực tiếp','N','RE0320',80,null,'<,<=,=,>=,>,<>','#,##0.###','N','N','N',100,null,'Direct amount','N','11',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (8,'REFVALUE','Tên đại lý/môi giới','C','RE0320',100,null,'LIKE,=',null,'N','N','N',200,null,'Remiser name','Y',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (7,'DESC_STATUS','Trạng thái','C','RE0320',80,null,'LIKE,=',null,'Y','Y','N',100,null,'Status','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (6,'NMLAMT','Giá trị','N','RE0320',80,null,'<,<=,=,>=,>,<>','#,##0','Y','Y','N',100,null,'Calculated amount','N','10',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (5,'FEEAMT','Phí giảm trừ','N','RE0320',80,null,'<,<=,=,>=,>,<>','#,##0','Y','N','N',100,null,'Fee','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (4,'REVENUE','Doanh số','N','RE0320',80,null,'<,<=,=,>=,>,<>','#,##0','Y','N','N',100,null,'Revenue','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (3,'DESC_REROLE','Vai trò','C','RE0320',80,null,'LIKE,=',null,'Y','Y','N',80,null,'Role','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (2,'FULLNAME','Tên','C','RE0320',100,null,'LIKE,=',null,'Y','Y','N',120,null,'Remiser name','N','21',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (1,'RECUSTID','Mã','C','RE0320',100,null,'LIKE,=',null,'N','N','N',200,null,'Remiser ID','N','20',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (0,'ACCTNO','Số tài khoản','C','RE0320',120,null,'LIKE,=',null,'Y','Y','Y',100,null,'Remiser account','N','03',null,'N',null,null,null,'N');
COMMIT;
/
