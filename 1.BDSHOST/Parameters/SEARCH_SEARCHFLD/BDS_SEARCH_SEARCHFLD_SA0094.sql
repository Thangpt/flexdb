--
--
/
DELETE SEARCH WHERE SEARCHCODE = 'SA0094';
INSERT INTO SEARCH (SEARCHCODE,SEARCHTITLE,EN_SEARCHTITLE,SEARCHCMDSQL,OBJNAME,FRMNAME,ORDERBYCMDSQL,TLTXCD,CNTRECORD,ROWPERPAGE,AUTOSEARCH,INTERVAL,AUTHCODE,ROWLIMIT,CMDTYPE)
VALUES ('SA0094','Điều chỉnh ICCF (0094)','Adjust ICCF (Wait for 0094)','SELECT ICCF.AUTOID, TYP.TYPENAME, ICCF.EVENTNAME, ICCF.MODCODE, ICCF.ACTYPE, ICCF.EVENTCODE, ICCF.DESC_RULETYPE,
 (CASE WHEN ICCF.ICTYPE=''F'' THEN ICCF.DESC_ICTYPE ELSE ICCF.DESC_ICRATECD || ''.'' || ICCF.DESC_ICTYPE END) VALTYPE,
 (CASE WHEN ICCF.ICTYPE=''F'' THEN ICCF.ICFLAT WHEN (ICCF.ICTYPE=''P'' AND ICCF.ICRATECD=''S'') THEN ICCF.ICRATE ELSE IRRATEVAL+ICCF.ICRATE END) VALRATE,
 ICCF.MINVAL, ICCF.MAXVAL, ICCF.ICRATE ICCFRATE, ICCF.VARRATE, ICCF.ICFLAT, NVL(ICCF.IRRATEVAL,0) IRRATEVAL, ICCF.ICRATEID,
 ICCF.DESC_MONTHDAY, ICCF.DESC_YEARDAY, ICCF.DESC_ICTYPE, ICCF.DESC_ICRATECD, ICCF.DESC_PERIOD
FROM ((SELECT ''CI'' MODCODE, ACTYPE, TYPENAME FROM CITYPE TYP
      UNION ALL SELECT ''SE'' MODCODE, ACTYPE, DESCRIPTION TYPENAME FROM SETYPE TYP
      UNION ALL SELECT ''OD'' MODCODE, ACTYPE, TYPENAME FROM ODTYPE TYP) TYP JOIN
                (SELECT APPEVENTS.EVENTNAME, ICCF.*, CD1.CDCONTENT DESC_RULETYPE, CD2.CDCONTENT DESC_MONTHDAY,
                CD3.CDCONTENT DESC_YEARDAY, CD4.CDCONTENT DESC_PERIOD, CD5.CDCONTENT DESC_ICTYPE, CD6.CDCONTENT DESC_ICRATECD
                FROM APPEVENTS, (SELECT ICCFTYPEDEF.*, IRRATE.RATE IRRATEVAL FROM ICCFTYPEDEF LEFT JOIN IRRATE ON ICCFTYPEDEF.ICRATEID=IRRATE.RATEID) ICCF,
                ALLCODE CD1, ALLCODE CD2, ALLCODE CD3, ALLCODE CD4, ALLCODE CD5, ALLCODE CD6
                WHERE APPEVENTS.MODCODE=ICCF.MODCODE AND APPEVENTS.EVENTCODE=ICCF.EVENTCODE AND ICCF.DELTD<>''Y'' AND ICCF.ICCFSTATUS=''A''
                AND CD1.CDTYPE=''SA'' AND CD1.CDNAME=''RULETYPE'' AND CD1.CDVAL=ICCF.RULETYPE
                AND CD2.CDTYPE=''SA'' AND CD2.CDNAME=''MONTHDAY'' AND CD2.CDVAL=ICCF.MONTHDAY
                AND CD3.CDTYPE=''SA'' AND CD3.CDNAME=''YEARDAY'' AND CD3.CDVAL=ICCF.YEARDAY
                AND CD4.CDTYPE=''SA'' AND CD4.CDNAME=''PERIOD'' AND CD4.CDVAL=ICCF.PERIOD
                AND CD5.CDTYPE=''SA'' AND CD5.CDNAME=''ICTYPE'' AND CD5.CDVAL=ICCF.ICTYPE
                AND CD6.CDTYPE=''SA'' AND CD6.CDNAME=''ICRATECD'' AND CD6.CDVAL=ICCF.ICRATECD) ICCF
                ON TYP.MODCODE=ICCF.MODCODE AND TYP.ACTYPE=ICCF.ACTYPE) WHERE 0=0 ','ICCFTYPEDEF',null,null,'0094',null,50,'N',30,null,'Y','T');
COMMIT;
/
--
--
/
DELETE SEARCHFLD WHERE SEARCHCODE = 'SA0094';
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (20,'DESC_PERIOD','DESC_PERIOD','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'DESC_PERIOD','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (19,'DESC_ICRATECD','DESC_ICRATECD','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'DESC_ICRATECD','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (18,'DESC_ICTYPE','DESC_ICTYPE','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'DESC_ICTYPE','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (17,'DESC_YEARDAY','DESC_YEARDAY','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'DESC_YEARDAY','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (16,'DESC_MONTHDAY','DESC_MONTHDAY','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'DESC_MONTHDAY','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (15,'ICRATEID','Irrate id','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Irrate id','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (14,'IRRATEVAL','Irrate val','N','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Irrate val','N','31',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (13,'ICFLAT','ICCF Flat','N','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'ICCF Flat','N','29',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (12,'VARRATE','Var rate','N','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Var rate','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (11,'ICCFRATE','Rate ICCF','N','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Rate ICCF','N','28',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (10,'MAXVAL','Giá trị tối đa','N','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Min val','N','27',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (9,'MINVAL','Giá trị tối thiểu','N','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Min val','N','26',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (8,'VALRATE','Rate','N','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Rate','N','25',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (7,'VALTYPE','Giá trị rule','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Val type','N','24',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (6,'DESC_RULETYPE','Kiểu rule','C','SA0094',100,null,'LIKE,=',null,'Y','N','N',100,null,'Rule type','N','23',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (5,'EVENTNAME','Tên sự kiện','C','SA0094',100,null,'LIKE,=',null,'Y','Y','N',100,null,'Event name','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (4,'EVENTCODE','Mã sự kiện','C','SA0094',100,null,'LIKE,=',null,'Y','Y','N',100,null,'Event code','N','22',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (3,'TYPENAME','Tên loại hình','C','SA0094',100,null,'LIKE,=',null,'Y','Y','N',100,null,'Product name','N','05',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (2,'ACTYPE','Mã loại hình','C','SA0094',100,null,'LIKE,=',null,'Y','Y','N',100,null,'Product code','N','21',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (1,'MODCODE','Phân hệ','C','SA0094',100,null,'=',null,'Y','Y','N',100,'SELECT  DISTINCT MODCODE VALUECD, MODCODE VALUE, MODCODE DISPLAY,MODCODE DESCRIPTION FROM APPMODULES ORDER BY MODCODE','Module code','N','20',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (0,'AUTOID','Số tự sinh','N','SA0094',100,null,'LIKE,=',null,'N','N','Y',100,null,'AutoID','N','03',null,'N',null,null,null,'N');
COMMIT;
/
