--
--
/
DELETE SEARCH WHERE SEARCHCODE = 'RE0391';
INSERT INTO SEARCH (SEARCHCODE,SEARCHTITLE,EN_SEARCHTITLE,SEARCHCMDSQL,OBJNAME,FRMNAME,ORDERBYCMDSQL,TLTXCD,CNTRECORD,ROWPERPAGE,AUTOSEARCH,INTERVAL,AUTHCODE,ROWLIMIT,CMDTYPE)
VALUES ('RE0391','Tra cứu khách hàng (Giao dịch 0391 để chuyển trạng thái)','wait for 0391 to change customer status','SELECT distinct  CFRE.CUSTID RECUSTID, CFRE.FULLNAME REFULLNAME, A0.CDCONTENT DESC_REROLE,
CFCUST.CUSTODYCD, CFCUST.FULLNAME CUSTNAME, A1.cdcontent AFSTATUS
FROM REAFLNK LNK, AFMAST AFCUST, CFMAST CFCUST, REMAST MST, RETYPE TYP, CFMAST CFRE, ALLCODE A0 , ALLCODE A1 , RECFLNK RF
WHERE
    AFCUST.ACCTNO=LNK.AFACCTNO AND LNK.STATUS=''A'' AND CFCUST.CUSTID=AFCUST.CUSTID
AND MST.ACCTNO=LNK.REACCTNO AND MST.ACTYPE=TYP.ACTYPE AND TYP.REROLE=''BM''
AND MST.CUSTID=CFRE.CUSTID  AND A0.CDTYPE=''RE'' AND A0.CDNAME=''REROLE'' AND A0.CDVAL=TYP.REROLE
AND A1.CDTYPE=''RE'' AND A1.CDNAME=''AFSTATUS'' AND A1.CDVAL=CFCUST.AFSTATUS
AND LNK.refrecflnkid=RF.autoid AND (<$BRID> =''0001'' or  RF.BRID = <$BRID>)','RE.REMAST',null,null,'0391',null,50,'N',30,'NYNNYYYNNN','Y','T');
COMMIT;
/
--
--
/
DELETE SEARCHFLD WHERE SEARCHCODE = 'RE0391';
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (6,'AFSTATUS','Trạng thái','C','RE0391',200,null,'=,LIKE',null,'Y','Y','N',100,null,'Status','N','01',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (5,'CUSTNAME','Tên KH','C','RE0391',200,null,'=,LIKE',null,'Y','Y','N',200,null,'Customer name','N','90',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (4,'CUSTODYCD','Số TK lưu ký KH','C','RE0391',200,null,'=,LIKE',null,'Y','Y','N',100,null,'Custody code','N','88',null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (3,'DESC_REROLE','Vai trò','C','RE0391',200,null,'=,LIKE',null,'Y','Y','N',80,null,'Role','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (2,'REFULLNAME','Tên môi giới','C','RE0391',200,null,'=,LIKE',null,'Y','Y','N',150,null,'Remiser name','N',null,null,'N',null,null,null,'N');
INSERT INTO SEARCHFLD (POSITION,FIELDCODE,FIELDNAME,FIELDTYPE,SEARCHCODE,FIELDSIZE,MASK,OPERATOR,FORMAT,DISPLAY,SRCH,KEY,WIDTH,LOOKUPCMDSQL,EN_FIELDNAME,REFVALUE,FLDCD,DEFVALUE,MULTILANG,ACDTYPE,ACDNAME,FIELDCMP,FIELDCMPKEY)
VALUES (1,'RECUSTID','Mã môi giới','C','RE0391',200,null,'=,LIKE',null,'Y','Y','N',80,null,'Remiser ID','N',null,null,'N',null,null,null,'N');
COMMIT;
/
