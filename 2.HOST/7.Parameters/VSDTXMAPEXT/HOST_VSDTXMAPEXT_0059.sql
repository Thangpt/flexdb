--
--
/
DELETE VSDTXMAPEXT WHERE OBJNAME = '0059';
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','TXDATE','C','<$BUSDATE>',null,'Ngày tạo yêu cầu',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','PROVINCE','C','$03','SELECT PROVINCE FROM CFMAST WHERE CUSTID=''<$FILTERID>''','Mã tỉnh/thành phố',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','PHONE','C','$03','SELECT MOBILE FROM CFMAST WHERE CUSTID=''<$FILTERID>''','Số điện thoại',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','IDTYPE','C','$03','SELECT A.Cdcontent FROM CFMAST CF, ALLCODE A WHERE CF.CUSTID=''<$FILTERID>''
AND CF.IDTYPE=A.CDVAL AND A.Cdname=''VSDIDTYPE'' ','Loại giấy tờ',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','IDPLACE','C','$03','SELECT IDPLACE FROM CFMAST WHERE CUSTID=''<$FILTERID>''','Nơi cấp CMT/hộ chiếu/giấy phép',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','IDDATE','D','$03','SELECT CASE WHEN IDTYPE = ''009'' THEN TO_CHAR(TRADINGCODEDT,''DD/MM/RRRR'') ELSE TO_CHAR(IDDATE,''DD/MM/RRRR'') END
FROM CFMAST
WHERE CUSTID = ''<$FILTERID>''','Ngày cấp CMT/hộ chiếu/giấy phép',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','IDCODE','C','$03','SELECT CASE WHEN IDTYPE = ''009'' THEN TRADINGCODE ELSE IDCODE END
FROM CFMAST
WHERE CUSTID = ''<$FILTERID>''','Giấy đăng ký sở hữu',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','FULLNAME','C','$03','SELECT FULLNAME FROM CFMAST WHERE CUSTID=''<$FILTERID>''','Tên đầy đủ nhà đầu tư',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','EMAIL','C','$03','SELECT EMAIL FROM CFMAST WHERE CUSTID=''<$FILTERID>''','Địa chỉ email',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','DOBDATE','D','$03','SELECT TO_CHAR(DATEOFBIRTH,''DD/MM/RRRR'') FROM CFMAST WHERE CUSTID=''<$FILTERID>''','Ngày sinh',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','DESC','C','$30',null,'Diễn giải',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','CUSTODYCD','C','$88',null,'Tài khoản nhà đầu tư',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','COUNTRY','C','$03','SELECT A.Cdcontent FROM CFMAST CF, ALLCODE A WHERE CF.CUSTID=''<$FILTERID>''
AND CF.country=A.CDVAL AND A.Cdname=''NATIONAL'' ','Mã quốc gia',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','ALTERNATEID','C','$03','select nvl(a.cdcontent,''VISD/OTHR'') ALTE from (
select case when (custtype = ''B'' and idtype not in (''005'',''009'')) or nvl(a.cdcontent, ''ZZ'') = ''ZZ'' then ''XXX'' else IDTYPE end || ''/'' ||
case when nvl(a.cdcontent, ''ZZ'') = ''ZZ'' then ''X'' else CUSTTYPE end  || ''/'' ||
  case when nvl(a.cdcontent, ''ZZ'') <> ''VN'' then ''XX'' else nvl(a.cdcontent, ''ZZ'')  end  as ALTE
from cfmast cf left join ALLCODE A on CF.country=A.CDVAL AND A.Cdname=''NATIONAL''
WHERE custid = ''<$FILTERID>'') mst left join allcode a on mst.alte = a.cdval and a.cdname = ''VSDALTE'' and a.cdtype = ''CF''','Thông tin đăng ký sở hữu, loại hình cổ đông',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','0059','598.NEWM/ACLS','ADDRESS','C','$03','SELECT ADDRESS FROM CFMAST WHERE CUSTID=''<$FILTERID>''','Địa chỉ thường trú',null);
COMMIT;
/
