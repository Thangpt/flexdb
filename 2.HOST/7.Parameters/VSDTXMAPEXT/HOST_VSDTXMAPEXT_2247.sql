--
--
/
DELETE VSDTXMAPEXT WHERE OBJNAME = '2247';
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','TXDATE','D','<$BUSDATE>',null,'Ngày tạo yêu cầu',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','SYMBOL','C','$01','SELECT SYMBOL FROM SBSECURITIES WHERE CODEID=''<$FILTERID>''','Mã chứng khoán',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','RECCUSTODY','C','$28',null,'Số tài khoản lưu ký nhận',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','RECCODE','C','$27','SELECT nvl(d.biccode, ''XXAAXXAA'') FROM deposit_member d where d.depositid = ''<$FILTERID>''','BICCODE bên nhận',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','QTTY','C','$10',null,'Khối lượng',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','IDTYPE','C','$13','SELECT AL.cdcontent FROM CFMAST CF, ALLCODE AL WHERE CF.CUSTODYCD=''<$FILTERID>''AND CF.IDTYPE=AL.CDVAL AND AL.CDNAME=''VSDIDTYPE''','Loại giấy tờ',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','IDPLACE','C','$13','SELECT IDPLACE FROM CFMAST WHERE CUSTODYCD=''<$FILTERID>''','Nơi cấp CMT/hộ chiếu/giấy phép',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','IDDATE','C','$13','SELECT CASE WHEN IDTYPE = ''009'' THEN TO_CHAR(TRADINGCODEDT,''DD/MM/RRRR'') ELSE TO_CHAR(IDDATE,''DD/MM/RRRR'') END
FROM CFMAST WHERE CUSTODYCD=''<$FILTERID>''','Ngày cấp CMT/hộ chiếu/giấy phép',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','IDCODE','C','$13','SELECT CASE WHEN IDTYPE = ''009'' THEN TRADINGCODE ELSE IDCODE END
FROM CFMAST WHERE CUSTODYCD=''<$FILTERID>''','Giấy đăng ký sở hữu',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','FULLNAME','C','$13','SELECT FULLNAME FROM CFMAST WHERE CUSTODYCD=''<$FILTERID>''','Tên đầy đủ nhà đầu tư',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','DESC','C','$30',null,'Diễn giải',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','CUSTODYCD','C','$13',null,'Tài khoản nhà đầu tư',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','COUNTRY','C','$13','SELECT AL.cdcontent FROM CFMAST CF, ALLCODE AL WHERE CF.CUSTODYCD=''<$FILTERID>''AND CF.COUNTRY=AL.CDVAL AND AL.CDNAME=''NATIONAL''','Mã quốc gia',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','ALTERNATEID','C','$13','select nvl(a.cdcontent,''VISD/OTHR'') ALTE from (
select case when (custtype = ''B'' and idtype not in (''005'',''009'')) or nvl(a.cdcontent, ''ZZ'') = ''ZZ'' then ''XXX'' else IDTYPE end || ''/'' ||
case when nvl(a.cdcontent, ''ZZ'') = ''ZZ'' then ''X'' else CUSTTYPE end  || ''/'' ||
  case when nvl(a.cdcontent, ''ZZ'') <> ''VN'' then ''XX'' else nvl(a.cdcontent, ''ZZ'')  end  as ALTE
from cfmast cf left join ALLCODE A on CF.country=A.CDVAL AND A.Cdname=''NATIONAL''
WHERE CUSTODYCD = ''<$FILTERID>'') mst left join allcode a on mst.alte = a.cdval and a.cdname = ''VSDALTE'' and a.cdtype = ''CF''','Thông tin đăng ký sở hữu, loại hình cổ đông',null);
INSERT INTO VSDTXMAPEXT (OBJTYPE,OBJNAME,TRFCODE,FLDNAME,FLDTYPE,AMTEXP,CMDSQL,CAPTION,ODRNUM)
VALUES ('T','2247','598.NEWM.ACCT//TBAC','ADDRESS','C','$13','SELECT ADDRESS FROM CFMAST WHERE CUSTODYCD=''<$FILTERID>''','Địa chỉ thường trú',null);
COMMIT;
/
